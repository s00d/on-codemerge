<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeMerge Editor</title>
    <link rel="stylesheet" href="main.esm.css">
    <style>
        #preview {
            .on-codemerge-resizer {
                display: none;
            }
        }
    </style>
</head>
<body>
<div id="app">Загрузка...</div>
<hr>
result:
<div id="result"></div>
<hr>
preview:
<div id="preview"></div>

<!-- Скрипт, сгенерированный Vite. Этот тег будет указывать на сгенерированный JavaScript. -->
<script type="module" src="/main.esm.js"></script>

<script type="module">
    import { EditorCore } from '/main.esm.js';
    import { BoldButtonPlugin } from '/boldButton.esm.js';
    import { TableButtonPlugin } from '/tableButton.esm.js';

    document.addEventListener('DOMContentLoaded', () => {
        const appElement = document.getElementById('app');
        if (appElement) {
            const editor = new EditorCore(appElement);
            editor.registerModule(new BoldButtonPlugin);
            editor.registerModule(new TableButtonPlugin);

            editor.subscribeToContentChange((newContent) => {

                const resultElement = document.getElementById('result');
                resultElement.innerText = newContent;
                console.log(newContent)

                const previewElement = document.getElementById('preview');
                previewElement.innerHTML = newContent;
            });

            editor.setContent("\n" +
                "<table class=\"on-codemerge-table\"><thead><tr><th>Header 1</th><th>Header 2</th><th>Header 3</th></tr></thead><tbody><tr><td style=\"position: relative;\">Row 1 Col 1<div class=\"on-codemerge-resizer\"></div></td><td style=\"position: relative;\">Row 1 Col 2<div class=\"on-codemerge-resizer\"></div></td><td style=\"position: relative;\">Row 1 Col 3<div class=\"on-codemerge-resizer\"></div></td></tr><tr><td style=\"position: relative;\">Row 2 Col 1<div class=\"on-codemerge-resizer\"></div></td><td style=\"position: relative;\">Row 2 Col 2<div class=\"on-codemerge-resizer\"></div></td><td style=\"position: relative;\">Row 2 Col 3<div class=\"on-codemerge-resizer\"></div></td></tr><tr><td style=\"position: relative;\">Row 3 Col 1<div class=\"on-codemerge-resizer\"></div></td><td style=\"position: relative;\">Row 3 Col 2<div class=\"on-codemerge-resizer\"></div></td><td style=\"position: relative;\">Row 3 Col 3<div class=\"on-codemerge-resizer\"></div></td></tr></tbody></table>")
        }
    });
</script>
</body>
</html>
